<section class="row m-b-md">
    <div class="col-sm-12">
      <h2>Bitcoin Address</h2>
      <%= render partial: 'shared/breadcrumb' %>
        <section class="panel panel-default">
            <div class="table-responsive">
                <table class="table table-striped">
                    <tbody>
                        <tr>
                            <td>Hash</td>
                            <td><%= @address['data']['address'] %></td>
                        </tr>
                        <tr>
                            <td>Balance</td>
                            <td title='<%= number_to_currency(@value * @address['data']['balance']) %>'><%= number_with_delimiter(@address['data']['balance'], delimiter: ',') %> BTC</td>
                        </tr>
                        <tr>
                            <td>Total Received</td>
                            <td title='<%= number_to_currency(@value * @address['data']['totalreceived']) %>'><%= number_with_delimiter(@address['data']['totalreceived'], delimiter: ',') %> BTC</td>
                        </tr>
                        <tr>
                            <td>Total # of Transactions</td>
                            <td><%= number_with_delimiter(@address['data']['nb_txs'], delimiter: ',')  %></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        <section class="row m-b-md">
          <div class="col-sm-12">
            <h3>Transactions (for Address <%= @address['data']['address'] %>)</h3>
          </div>
        </section>
        <section class="row m-b-md">
          <% ['first_tx', 'last_tx'].each do |tx| %>
            <div class="col-sm-6">
              <h4><%= tx === 'first_tx' ? 'First' : 'Last'%> Transaction</h4>
              <section class="panel panel-default">
                  <div class="table-responsive">
                      <table class="table table-striped">
                          <tbody>
                              <tr>
                                  <td>Time</td>
                                  <td><%= @address['data'][tx]['time_utc'] %></td>
                              </tr>
                              <tr>
                                  <td>Block</td>
                                  <td><%= link_to number_with_delimiter(@address['data'][tx]['block_nb'], delimiter: ','), block_path(@address['data'][tx]['block_nb']) %></td>
                              </tr>
                              <tr>
                                  <td>Transaction</td>
                                  <td><%= link_to @address['data'][tx]['tx'], transaction_path(@address['data'][tx]['tx']) %></td>
                              </tr>
                              <tr>
                                  <td>Amount</td>
                                  <td title='<%= number_to_currency(@value * @address['data'][tx]['value']) %>'><%= number_with_precision(@address['data'][tx]['value'], precision: 8) %> BTC</td>
                              </tr>
                              <tr>
                                  <td>Confirmations</td>
                                  <td><%= number_with_delimiter(@address['data'][tx]['confirmations'], delimiter: ',') %></td>
                              </tr>
                          </tbody>
                      </table>
                  </div>
              </section>
            </div>
          <% end %>
        </section>
        <section class="row m-b-md">
          <div class="col-sm-12">
            <% @txs['data']['txs'].each do |tx| %>
              <section class="panel panel-default">
                  <div class="table-responsive">
                      <table class="table table-striped">
                          <tbody>
                              <tr>
                                  <td>Hash</td>
                                  <td><%= link_to tx['tx'], transaction_path(tx['tx']) %></td>
                              </tr>
                              <tr>
                                  <td>Time</td>
                                  <td><%= tx['time_utc'] %></td>
                              </tr>
                              <tr>
                                  <td>Amount</td>
                                  <td title='<%= number_to_currency(@value * tx['amount']) %>' class='<%= tx["amount"] < 0 ? "danger" : "success" %>'>
                                  <%= number_with_delimiter(tx['amount'], delimiter: ',') %> BTC</td>
                              </tr>
                              <tr>
                                  <td># of Confirmations</td>
                                  <td><%= number_with_delimiter(tx['confirmations'], delimiter: ',') %></td>
                              </tr>
                          </tbody>
                      </table>
                  </div>
              </section>
            <% end %>
          </div>
        </section>
    </div>
</section>
